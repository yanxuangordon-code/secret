<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Security Warning</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Helvetica, Arial, sans-serif;
            background: #f5f5f7;
            overflow: hidden;
            cursor: none !important;
        }

        * {
            cursor: none !important;
        }

        /* Realistic Mac login screen backdrop */
        .backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            filter: blur(0px);
        }

        .backdrop::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000"><filter id="n"><feTurbulence baseFrequency="0.01"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity="0.03"/></svg>');
        }

        /* Mac-style system dialog */
        .system-dialog {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(80px);
            -webkit-backdrop-filter: blur(80px);
            border-radius: 16px;
            box-shadow: 0 20px 100px rgba(0, 0, 0, 0.4);
            width: 480px;
            padding: 0;
            z-index: 10000;
        }

        .dialog-header {
            padding: 24px 24px 16px;
            text-align: center;
            border-bottom: 1px solid rgba(0, 0, 0, 0.08);
        }

        .dialog-icon {
            width: 64px;
            height: 64px;
            margin: 0 auto 16px;
            background: linear-gradient(135deg, #FF3B30, #FF6B6B);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            animation: pulse-icon 2s infinite;
        }

        .dialog-title {
            font-size: 19px;
            font-weight: 600;
            color: #1d1d1f;
            margin-bottom: 8px;
        }

        .dialog-subtitle {
            font-size: 13px;
            color: #86868b;
            line-height: 1.5;
        }

        .dialog-body {
            padding: 20px 24px;
        }

        .warning-item {
            display: flex;
            align-items: flex-start;
            margin-bottom: 14px;
            font-size: 13px;
            color: #1d1d1f;
        }

        .warning-icon {
            margin-right: 10px;
            font-size: 16px;
            flex-shrink: 0;
        }

        .progress-section {
            margin: 20px 0;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 12px;
            color: #86868b;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(0, 0, 0, 0.08);
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #FF3B30, #FF6B6B);
            border-radius: 3px;
            animation: progress-move 3s ease-in-out infinite;
            width: 0%;
        }

        .dialog-footer {
            padding: 16px 24px 24px;
            display: flex;
            gap: 12px;
            justify-content: flex-end;
        }

        .btn {
            padding: 8px 20px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 500;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-secondary {
            background: rgba(0, 0, 0, 0.05);
            color: #1d1d1f;
        }

        .btn-secondary:hover {
            background: rgba(0, 0, 0, 0.08);
        }

        .btn-primary {
            background: #007AFF;
            color: white;
        }

        .btn-primary:hover {
            background: #0051D5;
        }

        /* Realistic Mac popup windows */
        .popup {
            position: fixed;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(80px);
            -webkit-backdrop-filter: blur(80px);
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.35);
            min-width: 380px;
            z-index: 9000;
            animation: popup-slide 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes popup-slide {
            0% {
                transform: scale(0.9) translateY(-20px);
                opacity: 0;
            }
            100% {
                transform: scale(1) translateY(0);
                opacity: 1;
            }
        }

        .popup-header {
            padding: 12px 16px;
            display: flex;
            align-items: center;
            cursor: move;
            border-bottom: 1px solid rgba(0, 0, 0, 0.06);
        }

        .traffic-lights {
            display: flex;
            gap: 8px;
            margin-right: 12px;
        }

        .traffic-light {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.15s;
        }

        .traffic-light.close {
            background: #FF5F57;
            border: 0.5px solid rgba(0, 0, 0, 0.1);
        }

        .traffic-light.minimize {
            background: #FEBC2E;
            border: 0.5px solid rgba(0, 0, 0, 0.1);
        }

        .traffic-light.maximize {
            background: #28C840;
            border: 0.5px solid rgba(0, 0, 0, 0.1);
        }

        .traffic-light:hover {
            filter: brightness(1.1);
        }

        .popup-title {
            font-size: 13px;
            font-weight: 600;
            color: #1d1d1f;
            flex: 1;
            text-align: center;
            margin-right: 60px;
        }

        .popup-content {
            padding: 24px 20px 20px;
            text-align: center;
        }

        .popup-icon {
            width: 56px;
            height: 56px;
            margin: 0 auto 16px;
            background: linear-gradient(135deg, #FF3B30, #FF6B6B);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
        }

        .popup-text {
            font-size: 13px;
            color: #1d1d1f;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .popup-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
        }

        .popup-button {
            padding: 8px 20px;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 500;
            border: none;
            cursor: pointer;
            transition: all 0.2s;
            background: rgba(0, 0, 0, 0.05);
            color: #1d1d1f;
        }

        .popup-button:hover {
            background: rgba(0, 0, 0, 0.08);
        }

        .popup-button.primary {
            background: #007AFF;
            color: white;
        }

        .popup-button.primary:hover {
            background: #0051D5;
        }

        /* System notification style */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.98);
            backdrop-filter: blur(80px);
            border-radius: 12px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.25);
            padding: 16px;
            width: 340px;
            z-index: 11000;
            animation: notification-slide 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        @keyframes notification-slide {
            0% {
                transform: translateX(400px);
                opacity: 0;
            }
            100% {
                transform: translateX(0);
                opacity: 1;
            }
        }

        .notification-header {
            display: flex;
            align-items: center;
            margin-bottom: 8px;
        }

        .notification-icon {
            width: 24px;
            height: 24px;
            margin-right: 10px;
            font-size: 18px;
        }

        .notification-title {
            font-size: 13px;
            font-weight: 600;
            color: #1d1d1f;
            flex: 1;
        }

        .notification-time {
            font-size: 11px;
            color: #86868b;
        }

        .notification-body {
            font-size: 12px;
            color: #1d1d1f;
            line-height: 1.5;
            padding-left: 34px;
        }

        @keyframes pulse-icon {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes progress-move {
            0% { width: 47%; }
            50% { width: 73%; }
            100% { width: 47%; }
        }

        .timestamp {
            font-family: 'SF Mono', 'Monaco', monospace;
            font-size: 11px;
            color: #86868b;
        }

        .technical-details {
            background: rgba(0, 0, 0, 0.02);
            border: 1px solid rgba(0, 0, 0, 0.08);
            border-radius: 8px;
            padding: 12px;
            margin: 16px 0;
            font-family: 'SF Mono', 'Monaco', monospace;
            font-size: 11px;
            color: #1d1d1f;
            line-height: 1.6;
        }

        .detail-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 4px;
        }

        .detail-label {
            color: #86868b;
        }

        .detail-value {
            font-weight: 500;
        }

        /* Removed escape-hint ‚Äî no ESC 5x anymore */
    </style>
</head>
<body>
    <div class="backdrop"></div>
    
    <div class="system-dialog">
        <div class="dialog-header">
            <div class="dialog-icon">‚ö†Ô∏è</div>
            <div class="dialog-title">Security Alert</div>
            <div class="dialog-subtitle">Your Mac has detected unusual activity</div>
        </div>
        
        <div class="dialog-body">
            <div class="warning-item">
                <span class="warning-icon">üîí</span>
                <span>Unauthorized encryption process detected on system volume</span>
            </div>
            <div class="warning-item">
                <span class="warning-icon">üìÅ</span>
                <span>Multiple file access violations in user directories</span>
            </div>
            <div class="warning-item">
                <span class="warning-icon">üåê</span>
                <span>Suspicious network activity to unknown remote server</span>
            </div>
            
            <div class="technical-details">
                <div class="detail-row">
                    <span class="detail-label">Process ID:</span>
                    <span class="detail-value">4892</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Threat Level:</span>
                    <span class="detail-value" style="color: #FF3B30;">Critical</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Files Affected:</span>
                    <span class="detail-value">142,857</span>
                </div>
                <div class="detail-row">
                    <span class="detail-label">Remote IP:</span>
                    <span class="detail-value">185.220.101.47</span>
                </div>
            </div>
            
            <div class="progress-section">
                <div class="progress-label">
                    <span>Scanning system...</span>
                    <span id="progressPercent">47%</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar"></div>
                </div>
            </div>
            
            <div class="timestamp">Last updated: <span id="currentTime"></span></div>
        </div>
        
        <div class="dialog-footer">
            <button class="btn btn-secondary" onclick="tryAction()">Ignore</button>
            <button class="btn btn-primary" onclick="tryAction()">Quarantine</button>
        </div>
    </div>

    <!-- =============== BOTTOM TYPING BAR ‚Äî GORDON IS SMART =============== -->
    <div id="gordonEscapeBar" style="
        position: fixed;
        bottom: 12px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(0,0,0,0.75);
        color: white;
        font-family: 'SF Mono', monaco, monospace;
        font-size: 14px;
        padding: 6px 12px;
        border-radius: 6px;
        z-index: 2147483647;
        display: flex;
        align-items: center;
        gap: 6px;
        pointer-events: auto;
    ">
        <span>type:</span>
        <strong>gordon is smart to escape</strong>
        <input id="gordonInput" type="text" style="
            background: rgba(0,0,0,0.4);
            border: none;
            outline: none;
            color: white;
            padding: 1px 6px;
            border-radius: 3px;
            min-width: 180px;
            font-size: 14px;
            font-family: inherit;
            caret-color: #00ffaa;
            pointer-events: auto;
        " placeholder="" autocomplete="off">
        <span id="gordonCursor" style="
            display: inline-block;
            width: 1.5px;
            height: 14px;
            background: #00ffaa;
            margin-left: 2px;
            animation: gordonBlink 1s infinite step-start;
        "></span>
    </div>
    <style>
        @keyframes gordonBlink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }
    </style>
    <script>
        (function() {
            const inp = document.getElementById('gordonInput');
            const cursor = document.getElementById('gordonCursor');

            // Focus the input when page loads
            setTimeout(() => inp.focus(), 100);

            // Listen to input changes
            inp.addEventListener('input', function() {
                const val = inp.value;
                const clean = val.toLowerCase().replace(/\s+/g, ' ').trim();

                if (clean === 'gordon is smart') {
                    // Hide everything
                    ['.backdrop','.system-dialog','.popup','.notification','#gordonEscapeBar']
                        .forEach(s => document.querySelectorAll(s).forEach(e => { e.style.display = 'none'; setTimeout(() => e.remove(), 50); }));

                    // Stop intervals
                    for (let i = 1; i < 99999; i++) clearInterval(i);

                    // Show success
                    const s = document.createElement('div');
                    s.style.cssText = `
                        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                        background: white; display: flex; flex-direction: column;
                        justify-content: center; align-items: center;
                        font-family: -apple-system, BlinkMacSystemFont, sans-serif;
                        z-index: 2147483647;
                    `;
                    s.innerHTML = `
                        <div style="font-size: 48px; font-weight: bold; color: #1d1d1f;">Gordon is smart.</div>
                        <div style="font-size: 18px; color: #86868b; margin-top: 12px;">No harm was done.</div>
                    `;
                    document.body.appendChild(s);
                }
            });

            // Optional: hide cursor after typing starts
            inp.addEventListener('focus', () => {
                cursor.style.display = 'none';
            });
            inp.addEventListener('blur', () => {
                cursor.style.display = 'inline-block';
            });

        })();
    </script>

    <script>
        let popups = [];
        let notifications = [];
        let escCount = 0;
        let prankActive = true;
        let intervals = [];
        let progressValue = 47;

        // Update time
        function updateTime() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
            const timeEl = document.getElementById('currentTime');
            if (timeEl) timeEl.textContent = timeStr;
        }
        updateTime();
        intervals.push(setInterval(updateTime, 1000));

        // Animate progress
        intervals.push(setInterval(() => {
            if (!prankActive) return;
            progressValue += Math.random() * 3;
            if (progressValue > 95) progressValue = 47;
            const progressBar = document.getElementById('progressBar');
            const progressPercent = document.getElementById('progressPercent');
            if (progressBar) progressBar.style.width = progressValue + '%';
            if (progressPercent) progressPercent.textContent = Math.floor(progressValue) + '%';
        }, 2000));

        // Request fullscreen
        function enterFullscreen() {
            const elem = document.documentElement;
            if (elem.requestFullscreen) {
                elem.requestFullscreen();
            } else if (elem.webkitRequestFullscreen) {
                elem.webkitRequestFullscreen();
            }
        }

        setTimeout(() => enterFullscreen(), 500);

        document.addEventListener('fullscreenchange', () => {
            if (!document.fullscreenElement && prankActive) {
                setTimeout(() => enterFullscreen(), 500);
            }
        });

        document.addEventListener('webkitfullscreenchange', () => {
            if (!document.webkitFullscreenElement && prankActive) {
                setTimeout(() => enterFullscreen(), 500);
            }
        });

        // Create realistic Mac popup windows
        function createPopup() {
            if (!prankActive) return;
            
            const popup = document.createElement('div');
            popup.className = 'popup';
            popup.style.left = Math.random() * (window.innerWidth - 380) + 'px';
            popup.style.top = Math.random() * (window.innerHeight - 300) + 'px';
            
            const messages = [
                { icon: '‚ö†Ô∏è', title: 'System Security', text: 'A potentially harmful process is attempting to access your keychain. This process may be trying to steal your passwords.' },
                { icon: 'üîí', title: 'FileVault Alert', text: 'System encryption has been compromised. Your FileVault protection may no longer be secure.' },
                { icon: 'üåê', title: 'Network Security', text: 'Outbound connection blocked to suspicious IP address. This may indicate malware activity on your Mac.' },
                { icon: 'üìÅ', title: 'File Access Violation', text: 'An unauthorized application is attempting to access your Documents folder without permission.' },
                { icon: 'üõ°Ô∏è', title: 'Gatekeeper Warning', text: 'System Integrity Protection has detected an attempt to modify protected system files.' },
                { icon: '‚ö°', title: 'Kernel Extension', text: 'An unsigned kernel extension is attempting to load. This could compromise system stability and security.' },
                { icon: 'üíæ', title: 'Disk Utility', text: 'Critical error detected on your startup disk. Immediate backup recommended before data loss occurs.' },
                { icon: 'üîê', title: 'Keychain Access', text: 'Multiple failed attempts to access your login keychain detected from an unknown application.' }
            ];
            
            const randomMsg = messages[Math.floor(Math.random() * messages.length)];
            
            popup.innerHTML = `
                <div class="popup-header">
                    <div class="traffic-lights">
                        <div class="traffic-light close" onclick="tryClose(this)"></div>
                        <div class="traffic-light minimize" onclick="tryClose(this)"></div>
                        <div class="traffic-light maximize" onclick="tryClose(this)"></div>
                    </div>
                    <div class="popup-title">${randomMsg.title}</div>
                </div>
                <div class="popup-content">
                    <div class="popup-icon">${randomMsg.icon}</div>
                    <div class="popup-text">${randomMsg.text}</div>
                    <div class="popup-buttons">
                        <button class="popup-button" onclick="tryClose(this)">Cancel</button>
                        <button class="popup-button primary" onclick="tryClose(this)">Allow</button>
                    </div>
                </div>
            `;
            
            document.body.appendChild(popup);
            popups.push(popup);
            makeDraggable(popup);
        }

        // Create notification
        function createNotification() {
            if (!prankActive) return;
            
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.style.top = (20 + notifications.length * 100) + 'px';
            
            const messages = [
                { icon: '‚ö†Ô∏è', title: 'Security & Privacy', text: 'System has blocked malicious software from running.' },
                { icon: 'üîí', title: 'FileVault', text: 'Encryption process interrupted by unauthorized access.' },
                { icon: 'üåê', title: 'Network', text: 'Suspicious outbound connection detected and blocked.' },
                { icon: 'üìÅ', title: 'Finder', text: 'Unable to complete operation. File may be corrupted.' },
                { icon: 'üíæ', title: 'Time Machine', text: 'Backup failed. Check your backup disk immediately.' }
            ];
            
            const randomMsg = messages[Math.floor(Math.random() * messages.length)];
            const now = new Date();
            const timeStr = now.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' });
            
            notification.innerHTML = `
                <div class="notification-header">
                    <div class="notification-icon">${randomMsg.icon}</div>
                    <div class="notification-title">${randomMsg.title}</div>
                    <div class="notification-time">${timeStr}</div>
                </div>
                <div class="notification-body">${randomMsg.text}</div>
            `;
            
            document.body.appendChild(notification);
            notifications.push(notification);
            
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.style.animation = 'notification-slide 0.4s reverse';
                    setTimeout(() => {
                        notification.remove();
                        notifications = notifications.filter(n => n !== notification);
                    }, 400);
                }
            }, 5000);
        }

        function tryAction() {
            if (!prankActive) return;
            createPopup();
            createPopup();
            setTimeout(() => createNotification(), 500);
        }

        function tryClose(element) {
            if (!prankActive) return;
            createPopup();
            createPopup();
            setTimeout(() => createNotification(), 300);
        }

        function makeDraggable(element) {
            let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
            const header = element.querySelector('.popup-header');
            
            header.onmousedown = dragMouseDown;
            
            function dragMouseDown(e) {
                e.preventDefault();
                pos3 = e.clientX;
                pos4 = e.clientY;
                document.onmouseup = closeDragElement;
                document.onmousemove = elementDrag;
            }
            
            function elementDrag(e) {
                e.preventDefault();
                pos1 = pos3 - e.clientX;
                pos2 = pos4 - e.clientY;
                pos3 = e.clientX;
                pos4 = e.clientY;
                element.style.top = (element.offsetTop - pos2) + 'px';
                element.style.left = (element.offsetLeft - pos1) + 'px';
            }
            
            function closeDragElement() {
                document.onmouseup = null;
                document.onmousemove = null;
            }
        }

        // Initial spawns
        setTimeout(() => createPopup(), 3000);
        setTimeout(() => createPopup(), 4000);
        setTimeout(() => createNotification(), 5000);
        setTimeout(() => createNotification(), 7000);

        // Real browser alerts
        setTimeout(() => {
            if (!prankActive) return;
            alert('System Security Alert\n\nMalicious software has been detected attempting to access your system keychain. Click OK to block this threat.');
        }, 6000);

        setTimeout(() => {
            if (!prankActive) return;
            if (confirm('Critical Security Warning\n\nYour FileVault encryption has been compromised. Would you like to reset your encryption password now?\n\n(Recommended: Yes)')) {
                alert('Password reset failed. Unable to establish secure connection to Apple servers.');
                createPopup();
                createPopup();
            } else {
                alert('Your system remains vulnerable. Please restart your Mac and try again.');
                createPopup();
            }
        }, 10000);

        // Disable mouse actions
        document.addEventListener('click', (e) => {
            if (!prankActive) return;
            e.preventDefault();
            e.stopPropagation();
            createPopup();
        }, true);

        document.addEventListener('mousedown', (e) => {
            if (!prankActive) return;
            e.preventDefault();
            e.stopPropagation();
        }, true);

        document.addEventListener('contextmenu', e => e.preventDefault());

        // Prevent closing
        window.addEventListener('beforeunload', (e) => {
            if (!prankActive) return;
            e.preventDefault();
            e.returnValue = 'Security scan in progress. Closing this window may leave your system vulnerable.';
            return 'Security scan in progress. Closing this window may leave your system vulnerable.';
        });

        history.pushState(null, null, location.href);
        window.addEventListener('popstate', () => {
            if (!prankActive) return;
            history.pushState(null, null, location.href);
            createPopup();
        });

        // ‚õî REMOVED: ESC 5x logic ‚Äî no more escape via ESC

        // Keep spawning
        intervals.push(setInterval(() => {
            if (!prankActive) return;
            if (popups.length < 12) {
                createPopup();
            }
            if (Math.random() < 0.4) {
                createNotification();
            }
        }, 7000));

        intervals.push(setInterval(() => {
            if (!prankActive) return;
            if (Math.random() < 0.3) {
                const alerts = [
                    'System Integrity Protection\n\nAn application is attempting to modify protected system files. This action has been blocked.',
                    'Gatekeeper\n\n"malware.app" cannot be opened because it is from an unidentified developer.',
                    'Network Security\n\nFirewall has blocked an incoming connection from 185.220.101.47',
                    'FileVault\n\nYour startup disk encryption may be compromised. A system restart is recommended.',
                    'Keychain Access\n\nThe application "SecurityAgent" wants to access your login keychain.',
                    'Time Machine\n\nBackup failed. The backup disk image could not be accessed.',
                    'Disk Utility\n\nFirst Aid found errors on "Macintosh HD". Click Repair Disk to fix these errors.'
                ];
                alert(alerts[Math.floor(Math.random() * alerts.length)]);
            }
        }, 8000));
    </script>
</body>
</html>

